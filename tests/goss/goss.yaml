package:
  s6:
    installed: true
    versions:
      contain-element:
        have-prefix: "2.7"
  tor:
    installed: true
    versions:
      contain-element:
        have-prefix: "0.3"
  3proxy:
    installed: true
    versions:
      contain-element:
        have-prefix: "0.8"
file:
  /etc/tor/torrc:
    exists: true
    mode: "0644"
    owner: root
    group: root
    filetype: file
    contains:
    - "SOCKSPort 127.0.0.1:9050"
    - "DNSPort 127.0.0.1:5353"
    - "AutomapHostsOnResolve 1"
    - "DataDirectory /var/lib/tor"
    - "ClientOnly 1"
  /etc/3proxy/3proxy.cfg:
    exists: true
    mode: "0644"
    owner: root
    group: root
    filetype: file
    contains:
    - "nserver 127.0.0.1:5353"
    - "users \"user:CL:pass\""
    - "auth strong"
    - "parent 1000 socks5+ 127.0.0.1 9050"
    - "socks -p1080"
port:
  tcp:9050:
    listening: true
    ip:
    - 127.0.0.1
  tcp:1080:
    listening: true
    ip:
    - 0.0.0.0
process:
  3proxy:
    running: true
  tor:
    running: true
